from cement.core import backend, foundation, hook, handler
import argparse
from pmtools import PmController
from pmtools.controller.project import ProjectController
from pmtools.controller.archive import ArchiveController, LsController, HelloController

app = foundation.CementApp('pm', base_controller=PmController)

try:
    #handler.register(ProjectController)
    handler.register(ArchiveController)
    handler.register(LsController)
    handler.register(HelloController)
    app.setup()
    app.args.formatter_class=argparse.ArgumentDefaultsHelpFormatter
    app.run()

finally:
    app.close()
